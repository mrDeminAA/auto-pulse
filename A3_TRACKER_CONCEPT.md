# Audi A3 Tracker - Глобальный Мониторинг

## Концепция
**Единая платформа для отслеживания Audi A3 по всему миру**

Пользователь выбирает Audi A3 → система мониторит все рынки → показывает лучшие предложения.

---

## User Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                    1. ЛЕНДИНГ (Главная)                        │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  "Найди свою идеальную Audi A3 в любой точке мира"     │   │
│  │  [Выбрать поколение] [Аналитика цен] [Карта]           │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│              2. РЕГИСТРАЦИЯ / АВТОРИЗАЦИЯ                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  [Войти через Google] [Войти через GitHub] [Email]     │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│              3. МОИ ПАРАМЕТРЫ ПОИСКА (Onboarding)              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Поколение:  ○ 8P (2003-2013)  ● 8V (2012-2020)        │   │
│  │               ○ 8Y (2020-н.в.)  ○ Любое                │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Кузов: [x] Хэтчбек [x] Седан [ ] Кабриолет            │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Двигатель: [ ] 1.4 TFSI [x] 2.0 TFSI [ ] 1.6 TDI [ ] Любой│   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Коробка: [x] Робот (S-Tronic) [ ] Механика [ ] Любая  │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Год от: [2015] до [2024]                               │   │
│  │  Пробег до: [150000] км                                 │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Бюджет: от [____] до [2500000] ₽                       │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Регионы поиска: [x] Китай [x] Европа [x] США [ ] Япония│   │
│  └─────────────────────────────────────────────────────────┘   │
│                    [Сохранить параметры]                        │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│              4. ДАШБОРД (Основной экран)                       │
│  ┌────────────┬──────────────────────┬─────────────────────┐   │
│  │            │                      │                     │   │
│  │  Статистика│   Найдено: 247       │   Уведомления: 3    │   │
│  │            │   Средняя: 1.8M₽     │   Избранное: 12     │   │
│  │            │                      │                     │   │
│  └────────────┴──────────────────────┴─────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  СВЕЖИЕ ПРЕДЛОЖЕНИЯ (за последние 24ч)                  │   │
│  │  ┌───────────────────────────────────────────────────┐  │   │
│  │  │ [IMG] Audi A3 2.0 TFSI S-Line (2019)              │  │   │
│  │  │       Китай, Пекин | ¥125,000 (~1.6M₽)            │  │   │
│  │  │       45,000 км | Робот | Белый                   │  │   │
│  │  │       [Избранное] [История] [Подробнее]           │  │   │
│  │  └───────────────────────────────────────────────────┘  │   │
│  │  ┌───────────────────────────────────────────────────┐  │   │
│  │  │ [IMG] Audi A3 Sportback 35 TFSI (2020)            │  │   │
│  │  │       Германия, Мюнхен | €18,900 (~1.9M₽)         │  │   │
│  │  │       62,000 км | Робот | Серый                   │  │   │
│  │  │       [Избранное] [История] [Подробнее]           │  │   │
│  │  └───────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  АНАЛИТИКА РЫНКА                                        │   │
│  │  ┌───────────────────────────────────────────────────┐  │   │
│  │  │  Динамика цен (8V поколение):                     │  │   │
│  │  │  ───────────────────────────────────────────────  │  │   │
│  │  │  Янв ████░░░░░░ 1.75M₽                           │  │   │
│  │  │  Фев ████░░░░░░ 1.72M₽ ↓                         │  │   │
│  │  │  Мар ███░░░░░░░ 1.68M₽ ↓                         │  │   │
│  │  └───────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│              5. КАРТОЧКА АВТОМОБИЛЯ                            │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  [Фото] [Фото] [Фото] [Фото]                            │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Audi A3 2.0 TFSI S-Line (2019)                         │   │
│  │  Китай, Пекин | ¥125,000 (~1.6M₽ + доставка)            │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Характеристики:                                        │   │
│  │  - Год: 2019 | Поколение: 8V (рестайлинг)              │   │
│  │  - Двигатель: 2.0L TFSI (190 л.с.)                     │   │
│  │  - Коробка: S-Tronic (робот)                           │   │
│  │  - Привод: Передний                                    │   │
│  │  - Пробег: 45,000 км                                   │   │
│  │  - Состояние: Б/У, 1 владелец                          │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  История цены:                                          │   │
│  │  - 01.02: ¥135,000                                     │   │
│  │  - 15.02: ¥125,000 ↓ (выгода ¥10,000)                  │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │  Источник: che168.com/dealer/...                        │   │
│  │  [Перейти к продавцу] [В избранное] [Поделиться]       │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

## Структура БД

### Users (Пользователи)
```
- id (PK)
- email
- password_hash
- name
- avatar_url
- telegram_id (для уведомлений)
- created_at
```

### UserPreferences (Параметры поиска)
```
- id (PK)
- user_id (FK → Users)
- generation (8P/8V/8Y/any)
- body_types (JSON: ["hatchback", "sedan"])
- engines (JSON: ["1.4_tfsi", "2.0_tfsi"])
- transmission (manual/s-tronic/any)
- year_from
- year_to
- max_mileage
- budget_from
- budget_to
- regions (JSON: ["china", "europe", "usa"])
- notify_on_new (bool)
- notify_on_price_drop (bool)
- created_at
- updated_at
```

### Cars (Автомобили)
```
- id (PK)
- source (che168/mobile_de/cars_com)
- source_id (уникальный на источнике)
- generation (8P/8V/8Y)
- brand (Audi)
- model (A3)
- year
- engine
- transmission
- body_type
- mileage
- price_original (в валюте источника)
- price_currency (CNY/EUR/USD)
- price_rub (конвертировано)
- location_country
- location_city
- image_urls (JSON)
- source_url
- description
- parsed_at
- created_at
- updated_at
```

### UserCars (Избранное)
```
- id (PK)
- user_id (FK → Users)
- car_id (FK → Cars)
- note (заметка пользователя)
- is_favorite
- created_at
```

### PriceHistory (История цен)
```
- id (PK)
- car_id (FK → Cars)
- price_original
- price_currency
- price_rub
- recorded_at
```

---

## Архитектура

```
┌────────────────────────────────────────────────────────────┐
│                    FRONTEND (React/Next.js)                │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐     │
│  │ Landing  │ │ Dashboard│ │  Car     │ │ Analytics│     │
│  │  Page    │ │  Page    │ │  Card    │ │  Page    │     │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘     │
└────────────────────────────────────────────────────────────┘
                           ↓ HTTPS
┌────────────────────────────────────────────────────────────┐
│                    BACKEND (ASP.NET Core API)              │
│  ┌──────────────────────────────────────────────────────┐ │
│  │  AuthController (JWT, OAuth)                         │ │
│  │  UserController (профиль, настройки)                 │ │
│  │  CarsController (поиск, фильтры, избранное)          │ │
│  │  AnalyticsController (статистика, графики)           │ │
│  └──────────────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────────┘
                           ↓
┌────────────────────────────────────────────────────────────┐
│                    PARSERS (AutoPulse.Parsing)             │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐     │
│  │ Che168   │ │ MobileDe │ │ CarsCom  │ │ GooNet   │     │
│  │ (China)  │ │(Europe)  │ │ (USA)    │ │ (Japan)  │     │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘     │
└────────────────────────────────────────────────────────────┘
                           ↓
┌────────────────────────────────────────────────────────────┐
│                    DATABASE (PostgreSQL)                   │
│  Users | UserPreferences | Cars | UserCars | PriceHistory │
└────────────────────────────────────────────────────────────┘
```

---

## Новая структура проекта

```
auto-pulse/
├── src/
│   ├── AutoPulse.Api/              # API Controllers
│   │   ├── Controllers/
│   │   │   ├── AuthController.cs
│   │   │   ├── UserController.cs
│   │   │   ├── CarsController.cs
│   │   │   └── AnalyticsController.cs
│   │   └── ...
│   │
│   ├── AutoPulse.Parsing/          # Парсеры
│   │   ├── AudiA3Parser.cs         # Базовый класс для A3
│   │   ├── Che168A3Parser.cs       # Китай
│   │   ├── MobileDeA3Parser.cs     # Европа
│   │   ├── CarsComA3Parser.cs      # США
│   │   └── ...
│   │
│   ├── AutoPulse.Worker/           # Фоновые задачи
│   │   └── A3MonitoringWorker.cs   # Мониторинг 24/7
│   │
│   └── ...
│
├── frontend/                        # React/Next.js
│   ├── app/
│   │   ├── page.tsx                # Лендинг
│   │   ├── login/                  # Авторизация
│   │   ├── dashboard/              # Дашборд
│   │   ├── car/[id]/               # Карточка авто
│   │   └── analytics/              # Аналитика
│   └── ...
│
└── docker-compose.yml              # PostgreSQL, Redis, RabbitMQ
```

---

## MVP (Минимальная версия)

### Спринт 1: База
- [ ] Регистрация/авторизация (JWT)
- [ ] Профиль пользователя
- [ ] Настройки параметров (поколение, год, бюджет)

### Спринт 2: Парсинг
- [ ] Che168 парсер (Китай) - уже готов!
- [ ] Сохранение в БД
- [ ] Конвертация валют (CNY → RUB)

### Спринт 3: Дашборд
- [ ] Список автомобилей
- [ ] Фильтры (год, цена, пробег)
- [ ] Карточка автомобиля

### Спринт 4: Уведомления
- [ ] Telegram бот
- [ ] Email уведомления
- [ ] "Избранное"

---

## Монетизация (на будущее)

1. **Freemium**:
   - Бесплатно: 1 регион, 50 авто/день
   - Premium (299₽/мес): все регионы, безлимит, приоритет

2. **API доступ** для других сервисов

3. **Партнёрка** с перегонами авто

---

## Следующие шаги

1. **Создать фронтенд** (React + Tailwind CSS)
2. **Добавить парсеры** Европы/США
3. **Настроить конвертацию** валют (API ЦБ РФ)
4. **Telegram бот** для уведомлений

---

**Как вам концепция? Готовы начать?**
